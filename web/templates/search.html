{{ define "search-content" }}
<div class="search-page">
    <div class="container">
        <!-- Search Header -->
        <header class="search-header">
            <h1 class="search-title">
                {{ if .query }}
                    Search Results for "{{ .query }}"
                {{ else }}
                    Search Articles
                {{ end }}
            </h1>
            {{ if .query }}
            <p class="search-subtitle">
                {{ if gt .count 0 }}
                    Found {{ .count }} {{ if eq .count 1 }}result{{ else }}results{{ end }}
                {{ else }}
                    No results found
                {{ end }}
            </p>
            {{ else }}
            <p class="search-subtitle">
                Search through all articles on {{ .config.Blog.Title }}
            </p>
            {{ end }}
        </header>

        <!-- Search Form -->
        <div class="search-form-container">
            <form class="search-form" method="GET" action="/search">
                <div class="search-input-group">
                    <input
                        type="search"
                        name="q"
                        class="search-input"
                        placeholder="Search articles, tags, or content..."
                        value="{{ .query }}"
                        autocomplete="off"
                        autofocus
                    />
                    <button type="submit" class="search-button">
                        <svg width="20" height="20" fill="currentColor" viewBox="0 0 16 16">
                            <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"/>
                        </svg>
                        <span class="sr-only">Search</span>
                    </button>
                </div>
                {{ if .query }}
                <a href="/search" class="clear-search">Clear search</a>
                {{ end }}
            </form>

            <!-- Search Suggestions -->
            <div class="search-suggestions" id="searchSuggestions" style="display: none;">
                <!-- Suggestions will be populated by JavaScript -->
            </div>
        </div>

        <!-- Search Results -->
        {{ if .query }}
            {{ if .results }}
            <div class="search-results">
                {{ range .results }}
                <article class="search-result">
                    <div class="result-content">
                        <h2 class="result-title">
                            <a href="/articles/{{ .Article.Slug }}">{{ .Article.Title }}</a>
                        </h2>

                        {{ if .Article.Description }}
                        <p class="result-description">{{ .Article.Description }}</p>
                        {{ end }}

                        <p class="result-excerpt">{{ .Article.Excerpt }}</p>

                        <div class="result-meta">
                            <time class="result-date" datetime="{{ .Article.Date.Format "2006-01-02T15:04:05Z07:00" }}">
                                {{ .Article.Date.Format "January 2, 2006" }}
                            </time>
                            <span class="result-reading-time">{{ .Article.ReadingTime }} min read</span>
                            <span class="result-score" title="Relevance score: {{ printf "%.1f" .Score }}">
                                {{ range $i := seq 1 5 }}
                                    {{ if le (mul $i 20) $.Score }}
                                        <svg width="12" height="12" fill="currentColor" viewBox="0 0 16 16" class="star filled">
                                            <path d="M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z"/>
                                        </svg>
                                    {{ else }}
                                        <svg width="12" height="12" fill="currentColor" viewBox="0 0 16 16" class="star">
                                            <path d="M2.866 14.85c-.078.444.36.791.746.593l4.39-2.256 4.389 2.256c.386.198.824-.149.746-.592l-.83-4.73 3.522-3.356c.33-.314.16-.888-.282-.95l-4.898-.696L8.465.792a.513.513 0 0 0-.927 0L5.354 5.12l-4.898.696c-.441.062-.612.636-.283.95l3.523 3.356-.83 4.73zm4.905-2.767-3.686 1.894.694-3.957a.565.565 0 0 0-.163-.505L1.71 6.745l4.052-.576a.525.525 0 0 0 .393-.288L8 2.223l1.847 3.658a.525.525 0 0 0 .393.288l4.052.576-2.906 2.77a.565.565 0 0 0-.163.506l.694 3.957-3.686-1.894a.503.503 0 0 0-.461 0z"/>
                                        </svg>
                                    {{ end }}
                                {{ end }}
                            </span>
                        </div>

                        {{ if .MatchedFields }}
                        <div class="result-matches">
                            <span class="matches-label">Matched in:</span>
                            {{ range .MatchedFields }}
                            <span class="match-field">{{ . }}</span>
                            {{ end }}
                        </div>
                        {{ end }}

                        {{ if .Article.Tags }}
                        <div class="result-tags">
                            {{ range .Article.Tags }}
                            <a href="/tags/{{ . | urlquery }}" class="tag">{{ . }}</a>
                            {{ end }}
                        </div>
                        {{ end }}
                    </div>
                </article>
                {{ end }}
            </div>
            {{ else }}
            <!-- No Results -->
            <div class="no-results">
                <div class="no-results-content">
                    <svg width="64" height="64" fill="currentColor" viewBox="0 0 16 16" class="no-results-icon">
                        <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"/>
                    </svg>
                    <h2>No results found</h2>
                    <p>We couldn't find any articles matching your search for "<strong>{{ .query }}</strong>".</p>

                    <div class="search-tips">
                        <h3>Try these search tips:</h3>
                        <ul>
                            <li>Check your spelling</li>
                            <li>Use different keywords</li>
                            <li>Use more general terms</li>
                            <li>Try searching for tags or categories</li>
                        </ul>
                    </div>

                    <div class="alternative-actions">
                        <a href="/articles" class="btn btn-primary">Browse All Articles</a>
                        <a href="/tags" class="btn btn-secondary">Explore Tags</a>
                    </div>
                </div>
            </div>
            {{ end }}
        {{ else }}
        <!-- Search Landing -->
        <div class="search-landing">
            <div class="search-stats">
                <div class="stat-item">
                    <span class="stat-number">{{ .totalCount | default "50+" }}</span>
                    <a href="/articles" class="stat-label stat-link">Articles</a>
                </div>
                <div class="stat-item">
                    <span class="stat-number">{{ len .tags | default "20+" }}</span>
                    <a href="/tags" class="stat-label stat-link">Tags</a>
                </div>
                <div class="stat-item">
                    <span class="stat-number">{{ len .categories | default "10+" }}</span>
                    <a href="/categories" class="stat-label stat-link">Categories</a>
                </div>
            </div>

            <div class="search-tips-expanded">
                <h2>Search Tips</h2>
                <div class="tips-grid">
                    <div class="tip-item">
                        <div class="tip-icon">
                            <svg width="24" height="24" fill="currentColor" viewBox="0 0 16 16">
                                <path d="M3 2v4.586l7 7L14.586 9l-7-7H3zM2 2a1 1 0 0 1 1-1h4.586a1 1 0 0 1 .707.293l7 7a1 1 0 0 1 0 1.414l-4.586 4.586a1 1 0 0 1-1.414 0l-7-7A1 1 0 0 1 2 6.586V2z"/>
                                <path d="M5.5 5a.5.5 0 1 1 0-1 .5.5 0 0 1 0 1zm0 1a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3zM1 7.086a1 1 0 0 0 .293.707L8.75 15.25l-.043.043a1 1 0 0 1-1.414 0l-7-7A1 1 0 0 1 0 7.586V3a1 1 0 0 1 1-1v5.086z"/>
                            </svg>
                        </div>
                        <div class="tip-content">
                            <h3>Search by Tags</h3>
                            <p>Use tag names like "golang", "javascript", or "programming" to find related articles.</p>
                        </div>
                    </div>

                    <div class="tip-item">
                        <div class="tip-icon">
                            <svg width="24" height="24" fill="currentColor" viewBox="0 0 16 16">
                                <path d="M14 1a1 1 0 0 1 1 1v8a1 1 0 0 1-1 1H4.414A2 2 0 0 0 3 11.586l-2 2V2a1 1 0 0 1 1-1h12zM2 0a2 2 0 0 0-2 2v12.793a.5.5 0 0 0 .854.353l2.853-2.853A1 1 0 0 1 4.414 12H14a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z"/>
                                <path d="M3 3.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zM3 6a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9A.5.5 0 0 1 3 6zm0 2.5a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5z"/>
                            </svg>
                        </div>
                        <div class="tip-content">
                            <h3>Content Search</h3>
                            <p>Search within article content, titles, and descriptions for comprehensive results.</p>
                        </div>
                    </div>

                    <div class="tip-item">
                        <div class="tip-icon">
                            <svg width="24" height="24" fill="currentColor" viewBox="0 0 16 16">
                                <path d="M1 2.828c.885-.37 2.154-.769 3.388-.893 1.33-.134 2.458.063 3.112.752v9.746c-.935-.53-2.12-.603-3.213-.493-1.18.12-2.37.461-3.287.811V2.828zm7.5-.141c.654-.689 1.782-.886 3.112-.752 1.234.124 2.503.523 3.388.893v9.923c-.918-.35-2.107-.692-3.287-.81-1.094-.111-2.278-.039-3.213.492V2.687zM8 1.783C7.015.936 5.587.81 4.287.94c-1.514.153-3.042.672-3.994 1.105A.5.5 0 0 0 0 2.5v11a.5.5 0 0 0 .707.455c.882-.4 2.303-.881 3.68-1.02 1.409-.142 2.59.087 3.223.877a.5.5 0 0 0 .78 0c.633-.79 1.814-1.019 3.222-.877 1.378.139 2.8.62 3.681 1.02A.5.5 0 0 0 16 13.5v-11a.5.5 0 0 0-.293-.455c-.952-.433-2.48-.952-3.994-1.105C10.413.809 8.985.936 8 1.783z"/>
                            </svg>
                        </div>
                        <div class="tip-content">
                            <h3>Browse Categories</h3>
                            <p>Explore articles by category like "Technology", "Programming", or "Personal".</p>
                        </div>
                    </div>

                    <div class="tip-item">
                        <div class="tip-icon">
                            <svg width="24" height="24" fill="currentColor" viewBox="0 0 16 16">
                                <path d="M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278z"/>
                            </svg>
                        </div>
                        <div class="tip-content">
                            <h3>Smart Ranking</h3>
                            <p>Results are ranked by relevance, with title matches weighted higher than content matches.</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Quick Links -->
            <div class="quick-search-links">
                <h3>Popular Searches</h3>
                <div class="quick-links">
                    <a href="/search?q=golang" class="quick-link">Go Programming</a>
                    <a href="/search?q=javascript" class="quick-link">JavaScript</a>
                    <a href="/search?q=tutorial" class="quick-link">Tutorials</a>
                    <a href="/search?q=architecture" class="quick-link">Architecture</a>
                    <a href="/search?q=performance" class="quick-link">Performance</a>
                    <a href="/search?q=programming" class="quick-link">Programming</a>
                </div>
            </div>
        </div>
        {{ end }}
    </div>
</div>

<!-- Structured Data -->
{{ if .query }}
<script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "SearchResultsPage",
    "name": "Search Results for {{ .query }}",
    "url": "{{ .config.BaseURL }}/search?q={{ .query }}",
    "mainEntity": {
        "@type": "ItemList",
        "numberOfItems": {{ .count }},
        "itemListElement": [
            {{ range $index, $result := .results }}
            {{ if $index }},{{ end }}
            {
                "@type": "BlogPosting",
                "position": {{ add $index 1 }},
                "headline": "{{ $result.Article.Title }}",
                "description": "{{ $result.Article.Excerpt }}",
                "url": "{{ $.config.BaseURL }}/articles/{{ $result.Article.Slug }}",
                "datePublished": "{{ $result.Article.Date.Format "2006-01-02T15:04:05Z07:00" }}",
                "author": {
                    "@type": "Person",
                    "name": "{{ $.config.Blog.Author }}"
                }
            }
            {{ end }}
        ]
    }
}
</script>
{{ end }}
{{ end }}

{{ define "search-head" }}
<meta name="description" content="{{ if .query }}Search results for {{ .query }} on {{ .config.Blog.Title }}{{ else }}Search articles on {{ .config.Blog.Title }}. Find content about technology, programming, and more.{{ end }}">
{{ if .query }}
<meta name="robots" content="noindex, follow">
{{ end }}


{{ end }}

{{ define "scripts" }}

{{ end }}
