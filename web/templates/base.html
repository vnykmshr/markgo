<!DOCTYPE html>
<html lang="{{ .config.Blog.Language | default "en" }}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <!-- Primary Meta Tags -->
    <title>{{ if .title }}{{ .title }} - {{ .config.Blog.Title }}{{ else }}{{ .config.Blog.Title }}{{ end }}</title>
    <meta name="title" content="{{ if .title }}{{ .title }} - {{ .config.Blog.Title }}{{ else }}{{ .config.Blog.Title }}{{ end }}">
    <meta name="description" content="{{ if .description }}{{ .description }}{{ else }}{{ .config.Blog.Description }}{{ end }}">
    <meta name="author" content="{{ .config.Blog.Author }}">
    <meta name="robots" content="index, follow">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="{{ if .article }}article{{ else }}website{{ end }}">
    <meta property="og:url" content="{{ .config.BaseURL }}{{ if .article }}/articles/{{ .article.Slug }}{{ end }}">
    <meta property="og:title" content="{{ if .title }}{{ .title }}{{ else }}{{ .config.Blog.Title }}{{ end }}">
    <meta property="og:description" content="{{ if .description }}{{ .description }}{{ else if .article }}{{ .article.Excerpt }}{{ else }}{{ .config.Blog.Description }}{{ end }}">
    <meta property="og:site_name" content="{{ .config.Blog.Title }}">

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="{{ .config.BaseURL }}{{ if .article }}/articles/{{ .article.Slug }}{{ end }}">
    <meta property="twitter:title" content="{{ if .title }}{{ .title }}{{ else }}{{ .config.Blog.Title }}{{ end }}">
    <meta property="twitter:description" content="{{ if .description }}{{ .description }}{{ else if .article }}{{ .article.Excerpt }}{{ else }}{{ .config.Blog.Description }}{{ end }}">

    <!-- Article specific meta -->
    {{ if .article }}
    <meta property="article:author" content="{{ .config.Blog.Author }}">
    <meta property="article:published_time" content="{{ .article.Date.Format "2006-01-02T15:04:05Z07:00" }}">
    {{ if .article.LastModified }}
    <meta property="article:modified_time" content="{{ .article.LastModified.Format "2006-01-02T15:04:05Z07:00" }}">
    {{ end }}
    {{ range .article.Tags }}
    <meta property="article:tag" content="{{ . }}">
    {{ end }}
    {{ end }}

    <!-- Favicon -->
    <link rel="apple-touch-icon-precomposed" sizes="57x57" href="/static/img/apple-touch-icon-57x57.png" />
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="/static/img/apple-touch-icon-114x114.png" />
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="/static/img/apple-touch-icon-72x72.png" />
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/static/img/apple-touch-icon-144x144.png" />
    <link rel="apple-touch-icon-precomposed" sizes="60x60" href="/static/img/apple-touch-icon-60x60.png" />
    <link rel="apple-touch-icon-precomposed" sizes="120x120" href="/static/img/apple-touch-icon-120x120.png" />
    <link rel="apple-touch-icon-precomposed" sizes="76x76" href="/static/img/apple-touch-icon-76x76.png" />
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="/static/img/apple-touch-icon-152x152.png" />

    <link rel="icon" type="image/png" href="/static/img/favicon-196x196.png" sizes="196x196" />
    <link rel="icon" type="image/png" href="/static/img/favicon-96x96.png" sizes="96x96" />
    <link rel="icon" type="image/png" href="/static/img/favicon-32x32.png" sizes="32x32" />
    <link rel="icon" type="image/png" href="/static/img/favicon-16x16.png" sizes="16x16" />
    <link rel="icon" type="image/png" href="/static/img/favicon-128.png" sizes="128x128" />

    <meta name="application-name" content="&nbsp;"/>
    <meta name="msapplication-TileColor" content="#FFFFFF" />
    <meta name="msapplication-TileImage" content="/static/img/mstile-144x144.png" />
    <meta name="msapplication-square70x70logo" content="/static/img/mstile-70x70.png" />
    <meta name="msapplication-square150x150logo" content="/static/img/mstile-150x150.png" />
    <meta name="msapplication-wide310x150logo" content="/static/img/mstile-310x150.png" />
    <meta name="msapplication-square310x310logo" content="/static/img/mstile-310x310.png" />

    <link rel="manifest" href="/static/site.webmanifest">

    <!-- Feeds -->
    <link rel="alternate" type="application/rss+xml" title="{{ .config.Blog.Title }} - RSS Feed" href="/feed.xml">
    <link rel="alternate" type="application/feed+json" title="{{ .config.Blog.Title }} - JSON Feed" href="/feed.json">

    <!-- Canonical URL -->
    <link rel="canonical" href="{{ .config.BaseURL }}{{ if .article }}/articles/{{ .article.Slug }}{{ end }}">

    <!-- Preconnect to external resources -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

    <!-- Stylesheets -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Fira+Code:wght@400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css">
    <link rel="stylesheet" href="/static/css/main.css">

    <!-- Template-specific CSS -->
    {{ $tpl := .template }}
    {{ if eq $tpl "404" }}<link rel="stylesheet" href="/static/css/404.css">{{ end }}
    {{ if eq $tpl "article" }}<link rel="stylesheet" href="/static/css/article.css">{{ end }}
    {{ if eq $tpl "articles" }}<link rel="stylesheet" href="/static/css/articles.css">{{ end }}

    {{ if eq $tpl "about-article" }}<link rel="stylesheet" href="/static/css/about-article.css">{{ end }}
    {{ if eq $tpl "contact" }}<link rel="stylesheet" href="/static/css/contact.css">{{ end }}
    {{ if eq $tpl "search" }}<link rel="stylesheet" href="/static/css/search.css">{{ end }}
    {{ if eq $tpl "tags" }}<link rel="stylesheet" href="/static/css/tags.css">{{ end }}
    {{ if eq $tpl "categories" }}<link rel="stylesheet" href="/static/css/categories.css">{{ end }}

    <!-- Additional head content -->
    {{ if eq $tpl "index" }}{{ template "index-head" . }}{{ end }}
    {{ if eq $tpl "articles" }}{{ template "articles-head" . }}{{ end }}
    {{ if eq $tpl "article" }}{{ template "article-head" . }}{{ end }}
    {{ if eq $tpl "search" }}{{ template "search-head" . }}{{ end }}
    {{ if eq $tpl "contact" }}{{ template "contact-head" . }}{{ end }}

    {{ if eq $tpl "about-article" }}{{ template "about-article-head" . }}{{ end }}
    {{ if eq $tpl "tags" }}{{ template "tags-head" . }}{{ end }}
    {{ if eq $tpl "categories" }}{{ template "categories-head" . }}{{ end }}
    {{ if eq $tpl "404" }}{{ template "404-head" . }}{{ end }}
</head>
<body class="{{- $tpl := .template | default "index" -}}
    {{- if eq $tpl "index" -}}homepage
    {{- else if eq $tpl "articles" -}}articles-page
    {{- else if eq $tpl "article" -}}article-page-body
    {{- else if eq $tpl "search" -}}search-page
    {{- else if eq $tpl "contact" -}}contact-page

    {{- else if eq $tpl "about-article" -}}about-article-page
    {{- else if eq $tpl "tags" -}}tags-page
    {{- else if eq $tpl "categories" -}}categories-page
    {{- else if eq $tpl "404" -}}error-page
    {{- end -}}">
    <!-- Header -->
    <header class="site-header">
        <nav class="navbar">
            <div class="container">
                <div class="navbar-brand">
                    <a href="/" class="brand-link">
                        <h1 class="brand-title">{{ .config.Blog.Title }}</h1>
                        <p class="brand-subtitle">{{ .config.Blog.Description }}</p>
                    </a>
                </div>

                <div class="navbar-menu" id="navbar-menu">
                    <ul class="navbar-nav">
                        <li class="nav-item">
                            <a href="/" class="nav-link">Home</a>
                        </li>
                        <li class="nav-item">
                            <a href="/articles" class="nav-link">Articles</a>
                        </li>
                        <li class="nav-item">
                            <a href="/tags" class="nav-link">Tags</a>
                        </li>
                        <li class="nav-item">
                            <a href="/about" class="nav-link">About</a>
                        </li>
                        <li class="nav-item">
                            <a href="/contact" class="nav-link">Contact</a>
                        </li>
                        <li class="nav-item">
                            <a href="/search" class="nav-link search-link">
                                <svg width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                                    <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"/>
                                </svg>
                                Search
                            </a>
                        </li>
                    </ul>
                </div>

                <button class="navbar-toggle" id="navbar-toggle" aria-label="Toggle navigation">
                    <span class="toggle-line"></span>
                    <span class="toggle-line"></span>
                    <span class="toggle-line"></span>
                </button>
            </div>
        </nav>
    </header>

    <!-- Main Content -->
    <main class="main-content">
        {{ $tpl := .template | default "index" }}
        {{ if eq $tpl "index" }}{{ template "index-content" . }}{{ end }}
        {{ if eq $tpl "articles" }}{{ template "articles-content" . }}{{ end }}
        {{ if eq $tpl "article" }}{{ template "article-content" . }}{{ end }}
        {{ if eq $tpl "search" }}{{ template "search-content" . }}{{ end }}
        {{ if eq $tpl "contact" }}{{ template "contact-content" . }}{{ end }}

        {{ if eq $tpl "about-article" }}{{ template "about-article-content" . }}{{ end }}
        {{ if eq $tpl "tags" }}{{ template "tags-content" . }}{{ end }}
        {{ if eq $tpl "categories" }}{{ template "categories-content" . }}{{ end }}
        {{ if eq $tpl "404" }}{{ template "404-content" . }}{{ end }}
    </main>

    <!-- Footer -->
    <footer class="site-footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>{{ .config.Blog.Title }}</h3>
                    <p>{{ .config.Blog.Description }}</p>
                    <div class="social-links">
                        <a href="/feed.xml" class="social-link" title="RSS Feed">
                            <svg width="20" height="20" fill="currentColor" viewBox="0 0 16 16">
                                <path d="M3.429 2.776c7.729 0 10.367 2.714 10.367 10.368H11.07c0-5.585-1.909-7.494-7.494-7.494V2.776Z"/>
                                <path d="M3.429 6.205c4.373 0 6.938 2.565 6.938 6.938h-2.727c0-2.31-1.9-4.21-4.21-4.21V6.205Z"/>
                                <circle cx="4.571" cy="11.429" r="1.143"/>
                            </svg>
                        </a>
                    </div>
                </div>

                <div class="footer-section">
                    <h4>Navigate</h4>
                    <ul class="footer-links">
                        <li><a href="/articles">All Articles</a></li>
                        <li><a href="/tags">Tags</a></li>
                        <li><a href="/categories">Categories</a></li>
                        <li><a href="/about">About</a></li>
                        <li><a href="/contact">Contact</a></li>
                    </ul>
                </div>

                <div class="footer-section">
                    <h4>Recent Posts</h4>
                    <ul class="footer-posts">
                        {{ if .recent }}
                            {{ range (slice .recent 0 3) }}
                            <li>
                                <a href="/articles/{{ .Slug }}" class="footer-post-link">{{ .Title }}</a>
                                <time class="footer-post-date">{{ .Date.Format "Jan 2, 2006" }}</time>
                            </li>
                            {{ end }}
                        {{ end }}
                    </ul>
                </div>
            </div>

            <div class="footer-bottom">
                <div class="footer-info">
                    <p>&copy; {{ now.Year }} {{ .config.Blog.Author }}. All rights reserved.</p>
                    <p>Powered by <a href="https://github.com/markgo/markgo" target="_blank" rel="noopener">MarkGo Engine</a></p>
                </div>

                <div class="footer-meta">
                    <span class="build-info">v2.0.0</span>
                </div>
            </div>
        </div>
    </footer>

    <!-- Scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script src="/static/js/main.js"></script>

    <!-- Template-specific JavaScript -->
    {{ $tpl := .template | default "index" }}
    {{ if eq $tpl "404" }}<script src="/static/js/404.js"></script>{{ end }}
    {{ if eq $tpl "article" }}<script src="/static/js/article.js"></script>{{ end }}
    {{ if eq $tpl "about-article" }}<script src="/static/js/about-article.js"></script>{{ end }}
    {{ if eq $tpl "contact" }}<script src="/static/js/contact.js"></script>{{ end }}
    {{ if eq $tpl "search" }}<script src="/static/js/search.js"></script>{{ end }}

    <!-- Additional scripts -->
    {{ block "scripts" . }}{{ end }}

    <!-- Analytics (if needed) -->
    {{ if .config.Analytics }}
    <!-- Add your analytics code here -->
    {{ end }}
</body>
</html>
